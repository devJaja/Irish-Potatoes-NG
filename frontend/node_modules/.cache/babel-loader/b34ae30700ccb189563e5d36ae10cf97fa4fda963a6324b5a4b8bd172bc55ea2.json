{"ast":null,"code":"import _objectSpread from\"/home/jaja/Desktop/irish-potatoes/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useCart}from'../context/CartContext';import{AlertCircle,Info}from'lucide-react';import toast from'react-hot-toast';import{ordersAPI}from'../services/api';import{nigerianStates}from'../utils/nigerianStates';// Mock API for order submission\n// const API = {\n//   submitOrder: async (data: CheckoutFormData) => {\n//     return new Promise<{ success: boolean; orderId: string; message: string }>((resolve) => {\n//       setTimeout(() => {\n//         resolve({\n//           success: true,\n//           orderId: 'ORD-' + Math.random().toString(36).substr(2, 9).toUpperCase(),\n//           message: 'Order placed successfully!'\n//         });\n//       }, 1500);\n//     });\n//   }\n// };\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Tooltip=_ref=>{let{text}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"group relative inline-block ml-1\",children:[/*#__PURE__*/_jsx(Info,{className:\"w-4 h-4 text-gray-400 cursor-help\"}),/*#__PURE__*/_jsx(\"div\",{className:\"invisible group-hover:visible absolute z-10 w-64 p-2 mt-2 text-sm bg-gray-800 text-white rounded-lg shadow-lg -left-28\",children:text})]});};const Checkout=()=>{const{items:cartItems,totalAmount,clearCart}=useCart();const navigate=useNavigate();const[formData,setFormData]=useState({fullName:'',email:'',phone:'',deliveryState:'',deliveryAddress:'',isInternationalDelivery:false,internationalCountry:'',internationalAddress:'',paymentMethod:''});const[errors,setErrors]=useState({});const[touched,setTouched]=useState({});const[isSubmitting,setIsSubmitting]=useState(false);const[deliveryCost,setDeliveryCost]=useState(0);// Mock delivery cost calculation\nuseEffect(()=>{if(formData.isInternationalDelivery){setDeliveryCost(50000);// Higher cost for international\n}else if(formData.deliveryState){// Basic mock based on state\nif(['Lagos','Abuja','Plateau'].includes(formData.deliveryState)){setDeliveryCost(2000);}else{setDeliveryCost(5000);}}else{setDeliveryCost(0);}},[formData.isInternationalDelivery,formData.deliveryState]);const validatePhone=phone=>{const pattern=/^(\\+234|0)[789]\\d{9}$/;return pattern.test(phone.replace(/\\s/g,''));};const validateEmail=email=>{const pattern=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;return pattern.test(email);};const validateForm=()=>{const newErrors={};if(!formData.fullName.trim())newErrors.fullName='Full name is required';if(!formData.email.trim()){newErrors.email='Email is required';}else if(!validateEmail(formData.email)){newErrors.email='Invalid email format';}if(!formData.phone.trim()){newErrors.phone='Phone number is required';}else if(!validatePhone(formData.phone)){newErrors.phone='Invalid Nigerian phone format (+234 or 0)';}if(formData.isInternationalDelivery){if(!formData.internationalCountry.trim())newErrors.internationalCountry='Country is required';if(!formData.internationalAddress.trim())newErrors.internationalAddress='International address is required';}else{if(!formData.deliveryState)newErrors.deliveryState='Please select a state';if(!formData.deliveryAddress.trim())newErrors.deliveryAddress='Delivery address is required';}if(!formData.paymentMethod)newErrors.paymentMethod='Please select a payment method';setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleInputChange=(field,value)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));setTouched(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:true}));// Real-time validation (basic)\nif(touched[field]){const newErrors=_objectSpread({},errors);if(field==='email'&&typeof value==='string'&&!validateEmail(value)){newErrors.email='Invalid email format';}else if(field==='phone'&&typeof value==='string'&&!validatePhone(value)){newErrors.phone='Invalid phone format';}else{delete newErrors[field];}setErrors(newErrors);}};const handleSubmit=async()=>{if(!validateForm())return;if(cartItems.length===0){toast.error('Your cart is empty. Please add products before checking out.');navigate('/products');return;}setIsSubmitting(true);const orderData={// 1. RENAME `products` to `items` to match backend\nitems:cartItems.map(item=>({product:item.product._id,quantity:item.quantity})),// 2. RESTRUCTURE `shippingAddress` to match backend model\nshippingAddress:{street:formData.isInternationalDelivery?formData.internationalAddress:formData.deliveryAddress,city:formData.isInternationalDelivery?formData.internationalCountry:formData.deliveryState,// Note: FE 'city' maps to BE 'state' for Nigeria\nstate:formData.isInternationalDelivery?'':formData.deliveryState,zipCode:'',// This field is in the BE model but not the FE form\nphone:formData.phone}// 3. REMOVE fields the backend calculates or doesn't use on creation\n// totalAmount is recalculated on the backend for security\n// paymentMethod is not used in the Order creation schema\n};try{const response=await ordersAPI.createOrder(orderData);if(response.data){toast.success('Order placed successfully! You will receive a confirmation email shortly.');clearCart();navigate('/order-tracking',{state:{orderId:response.data.order._id}});}}catch(error){var _error$response,_error$response$data;const errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Order submission failed. Please try again.';toast.error(errorMessage);}finally{setIsSubmitting(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-green-50 to-emerald-50 py-8 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-gray-800 mb-8 text-center\",children:\"Checkout\"}),cartItems.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-10\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-700\",children:\"Your cart is empty!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-2\",children:\"Add some delicious Irish potatoes to your cart to proceed to checkout.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/products'),className:\"mt-6 bg-primary-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-700 transition\",children:\"Go to Products\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6 mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-4\",children:\"Delivery Information\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Full Name \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"fullName\",value:formData.fullName,onChange:e=>handleInputChange('fullName',e.target.value),className:\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition \".concat(errors.fullName&&touched.fullName?'border-red-500':'border-gray-300'),placeholder:\"Enter your full name\"}),errors.fullName&&touched.fullName&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-sm mt-1 flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-4 h-4 mr-1\"}),errors.fullName]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Email Address \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:formData.email,onChange:e=>handleInputChange('email',e.target.value),className:\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition \".concat(errors.email&&touched.email?'border-red-500':'border-gray-300'),placeholder:\"your.email@example.com\"}),errors.email&&touched.email&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-sm mt-1 flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-4 h-4 mr-1\"}),errors.email]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Phone Number \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"}),/*#__PURE__*/_jsx(Tooltip,{text:\"Format: +234XXXXXXXXXX or 0XXXXXXXXXXX\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phone\",value:formData.phone,onChange:e=>handleInputChange('phone',e.target.value),className:\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition \".concat(errors.phone&&touched.phone?'border-red-500':'border-gray-300'),placeholder:\"+234 803 456 7890\"}),errors.phone&&touched.phone&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-sm mt-1 flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-4 h-4 mr-1\"}),errors.phone]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mt-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"internationalDelivery\",checked:formData.isInternationalDelivery,onChange:e=>handleInputChange('isInternationalDelivery',e.target.checked),className:\"form-checkbox h-5 w-5 text-green-600 transition duration-150 ease-in-out\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"internationalDelivery\",className:\"ml-2 text-gray-700 font-medium\",children:\"Deliver outside Nigeria\"})]}),formData.isInternationalDelivery?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Country \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"internationalCountry\",value:formData.internationalCountry,onChange:e=>handleInputChange('internationalCountry',e.target.value),className:\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition \".concat(errors.internationalCountry&&touched.internationalCountry?'border-red-500':'border-gray-300'),placeholder:\"Enter country\"}),errors.internationalCountry&&touched.internationalCountry&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-sm mt-1 flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-4 h-4 mr-1\"}),errors.internationalCountry]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"International Address \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{name:\"internationalAddress\",value:formData.internationalAddress,onChange:e=>handleInputChange('internationalAddress',e.target.value),rows:3,className:\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition \".concat(errors.internationalAddress&&touched.internationalAddress?'border-red-500':'border-gray-300'),placeholder:\"Enter full international address\"}),errors.internationalAddress&&touched.internationalAddress&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-sm mt-1 flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-4 h-4 mr-1\"}),errors.internationalAddress]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"State in Nigeria \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{name:\"deliveryState\",value:formData.deliveryState,onChange:e=>handleInputChange('deliveryState',e.target.value),className:\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition \".concat(errors.deliveryState&&touched.deliveryState?'border-red-500':'border-gray-300'),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a State\"}),nigerianStates.map(state=>/*#__PURE__*/_jsx(\"option\",{value:state,children:state},state))]}),errors.deliveryState&&touched.deliveryState&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-sm mt-1 flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-4 h-4 mr-1\"}),errors.deliveryState]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Delivery Address \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{name:\"deliveryAddress\",value:formData.deliveryAddress,onChange:e=>handleInputChange('deliveryAddress',e.target.value),rows:3,className:\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition \".concat(errors.deliveryAddress&&touched.deliveryAddress?'border-red-500':'border-gray-300'),placeholder:\"Enter your full delivery address within Nigeria\"}),errors.deliveryAddress&&touched.deliveryAddress&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-sm mt-1 flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-4 h-4 mr-1\"}),errors.deliveryAddress]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-4\",children:\"Payment Method\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"inline-flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"paymentMethod\",value:\"paystack\",checked:formData.paymentMethod==='paystack',onChange:e=>handleInputChange('paymentMethod',e.target.value),className:\"form-radio h-4 w-4 text-green-600 transition duration-150 ease-in-out\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-gray-700\",children:\"Paystack (Card/Bank Transfer)\"})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"inline-flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"paymentMethod\",value:\"bank_transfer\",checked:formData.paymentMethod==='bank_transfer',onChange:e=>handleInputChange('paymentMethod',e.target.value),className:\"form-radio h-4 w-4 text-green-600 transition duration-150 ease-in-out\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-gray-700\",children:\"Direct Bank Transfer\"})]})}),errors.paymentMethod&&touched.paymentMethod&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-sm mt-1 flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-4 h-4 mr-1\"}),errors.paymentMethod]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-6 rounded-lg border border-gray-200 mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-4\",children:\"Order Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[cartItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-gray-700\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[item.product.name,\" x \",item.quantity]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20A6\",(item.product.price*item.quantity).toLocaleString()]})]},item.product._id)),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between font-semibold text-gray-800 pt-2 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Subtotal\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20A6\",totalAmount.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between font-semibold text-gray-800\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Delivery Cost\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20A6\",deliveryCost.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between font-bold text-xl text-primary-600 pt-2 border-t border-gray-300\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Payable\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20A6\",(totalAmount+deliveryCost).toLocaleString()]})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:isSubmitting||cartItems.length===0,className:\"w-full bg-primary-600 text-white py-3 rounded-lg font-semibold hover:bg-primary-700 transition disabled:bg-gray-400 flex items-center justify-center\",children:isSubmitting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Info,{className:\"w-5 h-5 mr-2 animate-spin\"}),\" Placing Order...\"]}):'Place Order'})]})]})});};export default Checkout;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useCart","AlertCircle","Info","toast","ordersAPI","nigerianStates","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Tooltip","_ref","text","className","children","Checkout","items","cartItems","totalAmount","clearCart","navigate","formData","setFormData","fullName","email","phone","deliveryState","deliveryAddress","isInternationalDelivery","internationalCountry","internationalAddress","paymentMethod","errors","setErrors","touched","setTouched","isSubmitting","setIsSubmitting","deliveryCost","setDeliveryCost","includes","validatePhone","pattern","test","replace","validateEmail","validateForm","newErrors","trim","Object","keys","length","handleInputChange","field","value","prev","_objectSpread","handleSubmit","error","orderData","map","item","product","_id","quantity","shippingAddress","street","city","state","zipCode","response","createOrder","data","success","orderId","order","_error$response","_error$response$data","errorMessage","message","onClick","type","name","onChange","e","target","concat","placeholder","id","checked","htmlFor","rows","price","toLocaleString","disabled"],"sources":["/home/jaja/Desktop/irish-potatoes/frontend/src/pages/Checkout.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useCart } from '../context/CartContext';\nimport { AlertCircle, Info } from 'lucide-react';\nimport toast from 'react-hot-toast';\nimport { ordersAPI } from '../services/api';\nimport { nigerianStates } from '../utils/nigerianStates';\n\n// Mock API for order submission\n// const API = {\n//   submitOrder: async (data: CheckoutFormData) => {\n//     return new Promise<{ success: boolean; orderId: string; message: string }>((resolve) => {\n//       setTimeout(() => {\n//         resolve({\n//           success: true,\n//           orderId: 'ORD-' + Math.random().toString(36).substr(2, 9).toUpperCase(),\n//           message: 'Order placed successfully!'\n//         });\n//       }, 1500);\n//     });\n//   }\n// };\n\ninterface TooltipProps {\n  text: string;\n}\n\nconst Tooltip: React.FC<TooltipProps> = ({ text }) => (\n  <div className=\"group relative inline-block ml-1\">\n    <Info className=\"w-4 h-4 text-gray-400 cursor-help\" />\n    <div className=\"invisible group-hover:visible absolute z-10 w-64 p-2 mt-2 text-sm bg-gray-800 text-white rounded-lg shadow-lg -left-28\">\n      {text}\n    </div>\n  </div>\n);\n\ninterface CheckoutFormData {\n  fullName: string;\n  email: string;\n  phone: string;\n  deliveryState: string; // For Nigerian delivery\n  deliveryAddress: string;\n  isInternationalDelivery: boolean;\n  internationalCountry: string;\n  internationalAddress: string;\n  paymentMethod: 'paystack' | 'bank_transfer' | '';\n}\n\ntype CheckoutFormErrors = {\n  [key in keyof CheckoutFormData]?: string;\n};\n\nconst Checkout: React.FC = () => {\n  const { items: cartItems, totalAmount, clearCart } = useCart();\n  const navigate = useNavigate();\n\n  const [formData, setFormData] = useState<CheckoutFormData>({\n    fullName: '',\n    email: '',\n    phone: '',\n    deliveryState: '',\n    deliveryAddress: '',\n    isInternationalDelivery: false,\n    internationalCountry: '',\n    internationalAddress: '',\n    paymentMethod: '',\n  });\n\n  const [errors, setErrors] = useState<CheckoutFormErrors>({});\n  const [touched, setTouched] = useState<{[key in keyof CheckoutFormData]?: boolean}>({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [deliveryCost, setDeliveryCost] = useState(0);\n\n  // Mock delivery cost calculation\n  useEffect(() => {\n    if (formData.isInternationalDelivery) {\n      setDeliveryCost(50000); // Higher cost for international\n    } else if (formData.deliveryState) {\n      // Basic mock based on state\n      if (['Lagos', 'Abuja', 'Plateau'].includes(formData.deliveryState)) {\n        setDeliveryCost(2000);\n      } else {\n        setDeliveryCost(5000);\n      }\n    } else {\n      setDeliveryCost(0);\n    }\n  }, [formData.isInternationalDelivery, formData.deliveryState]);\n\n  const validatePhone = (phone: string): boolean => {\n    const pattern = /^(\\+234|0)[789]\\d{9}$/;\n    return pattern.test(phone.replace(/\\s/g, ''));\n  };\n\n  const validateEmail = (email: string): boolean => {\n    const pattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return pattern.test(email);\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: CheckoutFormErrors = {};\n\n    if (!formData.fullName.trim()) newErrors.fullName = 'Full name is required';\n    if (!formData.email.trim()) {\n      newErrors.email = 'Email is required';\n    } else if (!validateEmail(formData.email)) {\n      newErrors.email = 'Invalid email format';\n    }\n    if (!formData.phone.trim()) {\n      newErrors.phone = 'Phone number is required';\n    } else if (!validatePhone(formData.phone)) {\n      newErrors.phone = 'Invalid Nigerian phone format (+234 or 0)';\n    }\n\n    if (formData.isInternationalDelivery) {\n      if (!formData.internationalCountry.trim()) newErrors.internationalCountry = 'Country is required';\n      if (!formData.internationalAddress.trim()) newErrors.internationalAddress = 'International address is required';\n    } else {\n      if (!formData.deliveryState) newErrors.deliveryState = 'Please select a state';\n      if (!formData.deliveryAddress.trim()) newErrors.deliveryAddress = 'Delivery address is required';\n    }\n\n    if (!formData.paymentMethod) newErrors.paymentMethod = 'Please select a payment method';\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleInputChange = (field: keyof CheckoutFormData, value: string | boolean) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    setTouched(prev => ({ ...prev, [field]: true }));\n\n    // Real-time validation (basic)\n    if (touched[field]) {\n      const newErrors: CheckoutFormErrors = { ...errors };\n      if (field === 'email' && typeof value === 'string' && !validateEmail(value)) {\n        newErrors.email = 'Invalid email format';\n      } else if (field === 'phone' && typeof value === 'string' && !validatePhone(value)) {\n        newErrors.phone = 'Invalid phone format';\n      } else {\n        delete newErrors[field];\n      }\n      setErrors(newErrors);\n    }\n  };\n\n  const handleSubmit = async () => {\n    if (!validateForm()) return;\n    if (cartItems.length === 0) {\n      toast.error('Your cart is empty. Please add products before checking out.');\n      navigate('/products');\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    const orderData = {\n      // 1. RENAME `products` to `items` to match backend\n      items: cartItems.map(item => ({\n        product: item.product._id,\n        quantity: item.quantity,\n      })),\n      // 2. RESTRUCTURE `shippingAddress` to match backend model\n      shippingAddress: {\n        street: formData.isInternationalDelivery ? formData.internationalAddress : formData.deliveryAddress,\n        city: formData.isInternationalDelivery ? formData.internationalCountry : formData.deliveryState, // Note: FE 'city' maps to BE 'state' for Nigeria\n        state: formData.isInternationalDelivery ? '' : formData.deliveryState,\n        zipCode: '', // This field is in the BE model but not the FE form\n        phone: formData.phone,\n      },\n      // 3. REMOVE fields the backend calculates or doesn't use on creation\n      // totalAmount is recalculated on the backend for security\n      // paymentMethod is not used in the Order creation schema\n    };\n\n    try {\n      const response = await ordersAPI.createOrder(orderData);\n      if (response.data) {\n        toast.success('Order placed successfully! You will receive a confirmation email shortly.');\n        clearCart();\n        navigate('/order-tracking', { state: { orderId: response.data.order._id } });\n      }\n    } catch (error: any) {\n      const errorMessage = error.response?.data?.message || 'Order submission failed. Please try again.';\n      toast.error(errorMessage);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-green-50 to-emerald-50 py-8 px-4\">\n      <div className=\"max-w-4xl mx-auto bg-white rounded-lg shadow-md p-6\">\n        <h1 className=\"text-4xl font-bold text-gray-800 mb-8 text-center\">Checkout</h1>\n        \n        {cartItems.length === 0 ? (\n          <div className=\"text-center py-10\">\n            <h2 className=\"text-2xl font-semibold text-gray-700\">Your cart is empty!</h2>\n            <p className=\"text-gray-500 mt-2\">Add some delicious Irish potatoes to your cart to proceed to checkout.</p>\n            <button\n              onClick={() => navigate('/products')}\n              className=\"mt-6 bg-primary-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-700 transition\"\n            >\n              Go to Products\n            </button>\n          </div>\n        ) : (\n          <>\n            {/* Personal Information & Delivery */}\n            <div className=\"space-y-6 mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">Delivery Information</h2>\n              \n              {/* Full Name */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Full Name <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"fullName\"\n                  value={formData.fullName}\n                  onChange={(e) => handleInputChange('fullName', e.target.value)}\n                  className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition ${\n                    errors.fullName && touched.fullName ? 'border-red-500' : 'border-gray-300'\n                  }`}\n                  placeholder=\"Enter your full name\"\n                />\n                {errors.fullName && touched.fullName && (\n                  <p className=\"text-red-500 text-sm mt-1 flex items-center\">\n                    <AlertCircle className=\"w-4 h-4 mr-1\" />\n                    {errors.fullName}\n                  </p>\n                )}\n              </div>\n\n              {/* Email */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Email Address <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"email\"\n                  name=\"email\"\n                  value={formData.email}\n                  onChange={(e) => handleInputChange('email', e.target.value)}\n                  className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition ${\n                    errors.email && touched.email ? 'border-red-500' : 'border-gray-300'\n                  }`}\n                  placeholder=\"your.email@example.com\"\n                />\n                {errors.email && touched.email && (\n                  <p className=\"text-red-500 text-sm mt-1 flex items-center\">\n                    <AlertCircle className=\"w-4 h-4 mr-1\" />\n                    {errors.email}\n                  </p>\n                )}\n              </div>\n\n              {/* Phone */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Phone Number <span className=\"text-red-500\">*</span>\n                  <Tooltip text=\"Format: +234XXXXXXXXXX or 0XXXXXXXXXXX\" />\n                </label>\n                <input\n                  type=\"tel\"\n                  name=\"phone\"\n                  value={formData.phone}\n                  onChange={(e) => handleInputChange('phone', e.target.value)}\n                  className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition ${\n                    errors.phone && touched.phone ? 'border-red-500' : 'border-gray-300'\n                  }`}\n                  placeholder=\"+234 803 456 7890\"\n                />\n                {errors.phone && touched.phone && (\n                  <p className=\"text-red-500 text-sm mt-1 flex items-center\">\n                    <AlertCircle className=\"w-4 h-4 mr-1\" />\n                    {errors.phone}\n                  </p>\n                )}\n              </div>\n\n              {/* International Delivery Toggle */}\n              <div className=\"flex items-center mt-4\">\n                <input\n                  type=\"checkbox\"\n                  id=\"internationalDelivery\"\n                  checked={formData.isInternationalDelivery}\n                  onChange={(e) => handleInputChange('isInternationalDelivery', e.target.checked)}\n                  className=\"form-checkbox h-5 w-5 text-green-600 transition duration-150 ease-in-out\"\n                />\n                <label htmlFor=\"internationalDelivery\" className=\"ml-2 text-gray-700 font-medium\">\n                  Deliver outside Nigeria\n                </label>\n              </div>\n\n              {/* Conditional Delivery Fields */}\n              {formData.isInternationalDelivery ? (\n                <div className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Country <span className=\"text-red-500\">*</span>\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"internationalCountry\"\n                      value={formData.internationalCountry}\n                      onChange={(e) => handleInputChange('internationalCountry', e.target.value)}\n                      className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition ${\n                        errors.internationalCountry && touched.internationalCountry ? 'border-red-500' : 'border-gray-300'\n                      }`}\n                      placeholder=\"Enter country\"\n                    />\n                    {errors.internationalCountry && touched.internationalCountry && (\n                      <p className=\"text-red-500 text-sm mt-1 flex items-center\">\n                        <AlertCircle className=\"w-4 h-4 mr-1\" />\n                        {errors.internationalCountry}\n                      </p>\n                    )}\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      International Address <span className=\"text-red-500\">*</span>\n                    </label>\n                    <textarea\n                      name=\"internationalAddress\"\n                      value={formData.internationalAddress}\n                      onChange={(e) => handleInputChange('internationalAddress', e.target.value)}\n                      rows={3}\n                      className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition ${\n                        errors.internationalAddress && touched.internationalAddress ? 'border-red-500' : 'border-gray-300'\n                      }`}\n                      placeholder=\"Enter full international address\"\n                    />\n                    {errors.internationalAddress && touched.internationalAddress && (\n                      <p className=\"text-red-500 text-sm mt-1 flex items-center\">\n                        <AlertCircle className=\"w-4 h-4 mr-1\" />\n                        {errors.internationalAddress}\n                      </p>\n                    )}\n                  </div>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      State in Nigeria <span className=\"text-red-500\">*</span>\n                    </label>\n                    <select\n                      name=\"deliveryState\"\n                      value={formData.deliveryState}\n                      onChange={(e) => handleInputChange('deliveryState', e.target.value)}\n                      className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition ${\n                        errors.deliveryState && touched.deliveryState ? 'border-red-500' : 'border-gray-300'\n                      }`}\n                    >\n                      <option value=\"\">Select a State</option>\n                      {nigerianStates.map(state => (\n                        <option key={state} value={state}>{state}</option>\n                      ))}\n                    </select>\n                    {errors.deliveryState && touched.deliveryState && (\n                      <p className=\"text-red-500 text-sm mt-1 flex items-center\">\n                        <AlertCircle className=\"w-4 h-4 mr-1\" />\n                        {errors.deliveryState}\n                      </p>\n                    )}\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Delivery Address <span className=\"text-red-500\">*</span>\n                    </label>\n                    <textarea\n                      name=\"deliveryAddress\"\n                      value={formData.deliveryAddress}\n                      onChange={(e) => handleInputChange('deliveryAddress', e.target.value)}\n                      rows={3}\n                      className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition ${\n                        errors.deliveryAddress && touched.deliveryAddress ? 'border-red-500' : 'border-gray-300'\n                      }`}\n                      placeholder=\"Enter your full delivery address within Nigeria\"\n                    />\n                    {errors.deliveryAddress && touched.deliveryAddress && (\n                      <p className=\"text-red-500 text-sm mt-1 flex items-center\">\n                        <AlertCircle className=\"w-4 h-4 mr-1\" />\n                        {errors.deliveryAddress}\n                      </p>\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Payment Method */}\n            <div className=\"space-y-4 mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">Payment Method</h2>\n              <div>\n                <label className=\"inline-flex items-center\">\n                  <input\n                    type=\"radio\"\n                    name=\"paymentMethod\"\n                    value=\"paystack\"\n                    checked={formData.paymentMethod === 'paystack'}\n                    onChange={(e) => handleInputChange('paymentMethod', e.target.value)}\n                    className=\"form-radio h-4 w-4 text-green-600 transition duration-150 ease-in-out\"\n                  />\n                  <span className=\"ml-2 text-gray-700\">Paystack (Card/Bank Transfer)</span>\n                </label>\n              </div>\n              <div>\n                <label className=\"inline-flex items-center\">\n                  <input\n                    type=\"radio\"\n                    name=\"paymentMethod\"\n                    value=\"bank_transfer\"\n                    checked={formData.paymentMethod === 'bank_transfer'}\n                    onChange={(e) => handleInputChange('paymentMethod', e.target.value)}\n                    className=\"form-radio h-4 w-4 text-green-600 transition duration-150 ease-in-out\"\n                  />\n                  <span className=\"ml-2 text-gray-700\">Direct Bank Transfer</span>\n                </label>\n              </div>\n              {errors.paymentMethod && touched.paymentMethod && (\n                <p className=\"text-red-500 text-sm mt-1 flex items-center\">\n                  <AlertCircle className=\"w-4 h-4 mr-1\" />\n                  {errors.paymentMethod}\n                </p>\n              )}\n            </div>\n\n            {/* Order Summary */}\n            <div className=\"bg-gray-50 p-6 rounded-lg border border-gray-200 mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">Order Summary</h2>\n              <div className=\"space-y-2\">\n                {cartItems.map(item => (\n                  <div key={item.product._id} className=\"flex justify-between text-gray-700\">\n                    <span>{item.product.name} x {item.quantity}</span>\n                    <span>₦{(item.product.price * item.quantity).toLocaleString()}</span>\n                  </div>\n                ))}\n                <div className=\"flex justify-between font-semibold text-gray-800 pt-2 border-t border-gray-200\">\n                  <span>Subtotal</span>\n                  <span>₦{totalAmount.toLocaleString()}</span>\n                </div>\n                <div className=\"flex justify-between font-semibold text-gray-800\">\n                  <span>Delivery Cost</span>\n                  <span>₦{deliveryCost.toLocaleString()}</span>\n                </div>\n                <div className=\"flex justify-between font-bold text-xl text-primary-600 pt-2 border-t border-gray-300\">\n                  <span>Total Payable</span>\n                  <span>₦{(totalAmount + deliveryCost).toLocaleString()}</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Submit Button */}\n            <button\n              onClick={handleSubmit}\n              disabled={isSubmitting || cartItems.length === 0}\n              className=\"w-full bg-primary-600 text-white py-3 rounded-lg font-semibold hover:bg-primary-700 transition disabled:bg-gray-400 flex items-center justify-center\"\n            >\n              {isSubmitting ? (\n                <>\n                  <Info className=\"w-5 h-5 mr-2 animate-spin\" /> Placing Order...\n                </>\n              ) : (\n                'Place Order'\n              )}\n            </button>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Checkout;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}