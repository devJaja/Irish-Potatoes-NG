{"ast":null,"code":"import _objectSpread from\"/home/jaja/Desktop/irish-potatoes/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const CartContext=/*#__PURE__*/createContext(undefined);export const CartProvider=_ref=>{let{children}=_ref;const[items,setItems]=useState([]);useEffect(()=>{const savedCart=localStorage.getItem('cart');if(savedCart)setItems(JSON.parse(savedCart));},[]);useEffect(()=>{localStorage.setItem('cart',JSON.stringify(items));},[items]);const addToCart=(product,quantity)=>{setItems(prev=>{const existing=prev.find(item=>item.product._id===product._id);if(existing){return prev.map(item=>item.product._id===product._id?_objectSpread(_objectSpread({},item),{},{quantity:item.quantity+quantity}):item);}return[...prev,{product,quantity}];});};const removeFromCart=productId=>{setItems(prev=>prev.filter(item=>item.product._id!==productId));};const updateQuantity=(productId,quantity)=>{if(quantity<=0){removeFromCart(productId);return;}setItems(prev=>prev.map(item=>item.product._id===productId?_objectSpread(_objectSpread({},item),{},{quantity}):item));};const clearCart=()=>setItems([]);const totalItems=items.reduce((sum,item)=>sum+item.quantity,0);const totalUniqueItems=items.length;// Number of unique items\nconst totalAmount=items.reduce((sum,item)=>sum+item.product.price*item.quantity,0);return/*#__PURE__*/_jsx(CartContext.Provider,{value:{items,addToCart,removeFromCart,updateQuantity,clearCart,totalItems,totalUniqueItems,totalAmount},children:children});};export const useCart=()=>{const context=useContext(CartContext);if(!context)throw new Error('useCart must be used within CartProvider');return context;};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsx","_jsx","CartContext","undefined","CartProvider","_ref","children","items","setItems","savedCart","localStorage","getItem","JSON","parse","setItem","stringify","addToCart","product","quantity","prev","existing","find","item","_id","map","_objectSpread","removeFromCart","productId","filter","updateQuantity","clearCart","totalItems","reduce","sum","totalUniqueItems","length","totalAmount","price","Provider","value","useCart","context","Error"],"sources":["/home/jaja/Desktop/irish-potatoes/frontend/src/context/CartContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { CartItem, Product } from '../types';\n\ninterface CartContextType {\n  items: CartItem[];\n  addToCart: (product: Product, quantity: number) => void;\n  removeFromCart: (productId: string) => void;\n  updateQuantity: (productId: string, quantity: number) => void;\n  clearCart: () => void;\n  totalItems: number;\n  totalUniqueItems: number;\n  totalAmount: number;\n}\n\nconst CartContext = createContext<CartContextType | undefined>(undefined);\n\nexport const CartProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [items, setItems] = useState<CartItem[]>([]);\n\n  useEffect(() => {\n    const savedCart = localStorage.getItem('cart');\n    if (savedCart) setItems(JSON.parse(savedCart));\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(items));\n  }, [items]);\n\n  const addToCart = (product: Product, quantity: number) => {\n    setItems(prev => {\n      const existing = prev.find(item => item.product._id === product._id);\n      if (existing) {\n        return prev.map(item =>\n          item.product._id === product._id\n            ? { ...item, quantity: item.quantity + quantity }\n            : item\n        );\n      }\n      return [...prev, { product, quantity }];\n    });\n  };\n\n  const removeFromCart = (productId: string) => {\n    setItems(prev => prev.filter(item => item.product._id !== productId));\n  };\n\n  const updateQuantity = (productId: string, quantity: number) => {\n    if (quantity <= 0) {\n      removeFromCart(productId);\n      return;\n    }\n    setItems(prev =>\n      prev.map(item =>\n        item.product._id === productId ? { ...item, quantity } : item\n      )\n    );\n  };\n\n  const clearCart = () => setItems([]);\n\n  const totalItems = items.reduce((sum, item) => sum + item.quantity, 0);\n  const totalUniqueItems = items.length; // Number of unique items\n  const totalAmount = items.reduce((sum, item) => sum + (item.product.price * item.quantity), 0);\n\n  return (\n    <CartContext.Provider value={{\n      items,\n      addToCart,\n      removeFromCart,\n      updateQuantity,\n      clearCart,\n      totalItems,\n      totalUniqueItems,\n      totalAmount\n    }}>\n      {children}\n    </CartContext.Provider>\n  );\n};\n\nexport const useCart = () => {\n  const context = useContext(CartContext);\n  if (!context) throw new Error('useCart must be used within CartProvider');\n  return context;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}