{"ast":null,"code":"import _objectSpread from\"/home/jaja/Desktop/irish-potatoes/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import{useForm}from'react-hook-form';import{Link,useNavigate}from'react-router-dom';import{useMutation}from'@tanstack/react-query';import{authAPI}from'../services/api';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const{register,handleSubmit,formState:{errors}}=useForm();const{login}=useAuth();const navigate=useNavigate();const loginMutation=useMutation({mutationFn:authAPI.login,onSuccess:response=>{login(response.data.token,response.data.user);navigate('/');},onError:error=>{var _error$response,_error$response$data;alert(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Login failed');}});const onSubmit=data=>{loginMutation.mutate(data);};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full bg-white rounded-lg shadow-md p-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-center mb-6\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"email\"},register('email',{required:'Email is required'})),{},{className:\"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"})),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm\",children:errors.email.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"password\"},register('password',{required:'Password is required'})),{},{className:\"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"})),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm\",children:errors.password.message})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loginMutation.isPending,className:\"w-full bg-primary-600 text-white py-2 rounded hover:bg-primary-700 disabled:bg-gray-400\",children:loginMutation.isPending?'Logging in...':'Login'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center mt-4\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"text-primary-600 hover:underline\",children:\"Register\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-2\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",className:\"text-sm text-primary-600 hover:underline\",children:\"Forgot password?\"})})]})});};export default Login;","map":{"version":3,"names":["React","useForm","Link","useNavigate","useMutation","authAPI","useAuth","jsx","_jsx","jsxs","_jsxs","Login","register","handleSubmit","formState","errors","login","navigate","loginMutation","mutationFn","onSuccess","response","data","token","user","onError","error","_error$response","_error$response$data","alert","message","onSubmit","mutate","className","children","_objectSpread","type","required","email","password","disabled","isPending","to"],"sources":["/home/jaja/Desktop/irish-potatoes/frontend/src/pages/Login.tsx"],"sourcesContent":["import React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useMutation } from '@tanstack/react-query';\nimport { authAPI } from '../services/api';\nimport { useAuth } from '../context/AuthContext';\n\ninterface LoginForm {\n  email: string;\n  password: string;\n}\n\nconst Login: React.FC = () => {\n  const { register, handleSubmit, formState: { errors } } = useForm<LoginForm>();\n  const { login } = useAuth();\n  const navigate = useNavigate();\n\n  const loginMutation = useMutation({\n    mutationFn: authAPI.login,\n    onSuccess: (response) => {\n      login(response.data.token, response.data.user);\n      navigate('/');\n    },\n    onError: (error: any) => {\n      alert(error.response?.data?.message || 'Login failed');\n    }\n  });\n\n  const onSubmit = (data: LoginForm) => {\n    loginMutation.mutate(data);\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n      <div className=\"max-w-md w-full bg-white rounded-lg shadow-md p-8\">\n        <h2 className=\"text-2xl font-bold text-center mb-6\">Login</h2>\n        \n        <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Email</label>\n            <input\n              type=\"email\"\n              {...register('email', { required: 'Email is required' })}\n              className=\"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\n            />\n            {errors.email && <p className=\"text-red-500 text-sm\">{errors.email.message}</p>}\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Password</label>\n            <input\n              type=\"password\"\n              {...register('password', { required: 'Password is required' })}\n              className=\"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\n            />\n            {errors.password && <p className=\"text-red-500 text-sm\">{errors.password.message}</p>}\n          </div>\n          \n          <button\n            type=\"submit\"\n            disabled={loginMutation.isPending}\n            className=\"w-full bg-primary-600 text-white py-2 rounded hover:bg-primary-700 disabled:bg-gray-400\"\n          >\n            {loginMutation.isPending ? 'Logging in...' : 'Login'}\n          </button>\n        </form>\n        \n        <p className=\"text-center mt-4\">\n          Don't have an account? <Link to=\"/register\" className=\"text-primary-600 hover:underline\">Register</Link>\n        </p>\n        <p className=\"text-center mt-2\">\n          <Link to=\"/forgot-password\"className=\"text-sm text-primary-600 hover:underline\">Forgot password?</Link>\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}