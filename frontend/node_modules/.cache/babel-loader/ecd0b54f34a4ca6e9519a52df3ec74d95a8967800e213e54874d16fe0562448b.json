{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useQuery,useMutation,useQueryClient}from'@tanstack/react-query';import{productsAPI,uploadAPI}from'../services/api';import{UploadCloud,X,Loader2}from'lucide-react';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminProducts=()=>{const queryClient=useQueryClient();const[selectedProduct,setSelectedProduct]=useState(null);const[selectedFiles,setSelectedFiles]=useState([]);const[existingImages,setExistingImages]=useState([]);const[isUploading,setIsUploading]=useState(false);// When a product is selected for editing, populate the form and existing images\nuseEffect(()=>{if(selectedProduct){setExistingImages(selectedProduct.images||[]);setSelectedFiles([]);// Clear any selected files from previous state\n}else{// Reset all form-related state when deselecting\nsetExistingImages([]);setSelectedFiles([]);}},[selectedProduct]);// Fetch products\nconst{data:productsData,isLoading,error}=useQuery({queryKey:['adminProducts'],queryFn:()=>productsAPI.getProducts({})});// Add Product Mutation\nconst addProductMutation=useMutation({mutationFn:productsAPI.createProduct,onSuccess:()=>{queryClient.invalidateQueries({queryKey:['adminProducts']});toast.success('Product added successfully!');resetForm();},onError:err=>{var _err$response,_err$response$data;console.error('Error adding product:',err);toast.error(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to add product.');}});// Update Product Mutation\nconst updateProductMutation=useMutation({mutationFn:_ref=>{let{id,productData}=_ref;return productsAPI.updateProduct(id,productData);},onSuccess:()=>{queryClient.invalidateQueries({queryKey:['adminProducts']});toast.success('Product updated successfully!');resetForm();},onError:err=>{var _err$response2,_err$response2$data;console.error('Error updating product:',err);toast.error(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||'Failed to update product.');}});// Delete Product Mutation\nconst deleteProductMutation=useMutation({mutationFn:productsAPI.deleteProduct,onSuccess:()=>{queryClient.invalidateQueries({queryKey:['adminProducts']});toast.success('Product deleted successfully!');},onError:err=>{var _err$response3,_err$response3$data;console.error('Error deleting product:',err);toast.error(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||'Failed to delete product.');}});const resetForm=()=>{setSelectedProduct(null);setSelectedFiles([]);setExistingImages([]);// This will implicitly clear the form fields because of the `key` prop on the form\n};const handleSubmit=async e=>{var _form$elements$namedI;e.preventDefault();let uploadedImageUrls=[];// 1. Handle file uploads first\nif(selectedFiles.length>0){setIsUploading(true);const formData=new FormData();selectedFiles.forEach(file=>{formData.append('images',file);});try{const response=await uploadAPI.uploadProductImages(formData);uploadedImageUrls=response.data.imageUrls;toast.success('Images uploaded successfully!');}catch(uploadError){var _uploadError$response,_uploadError$response2;console.error('Image upload failed:',uploadError);toast.error(((_uploadError$response=uploadError.response)===null||_uploadError$response===void 0?void 0:(_uploadError$response2=_uploadError$response.data)===null||_uploadError$response2===void 0?void 0:_uploadError$response2.message)||'Image upload failed.');setIsUploading(false);return;// Stop form submission if upload fails\n}finally{setIsUploading(false);}}const form=e.currentTarget;const formElements=new FormData(form);// 2. Construct product data with uploaded image URLs\nconst productData={name:formElements.get('name'),description:formElements.get('description'),price:parseFloat(formElements.get('price')),category:formElements.get('category'),weight:formElements.get('weight'),stock:parseInt(formElements.get('stock'))||0,images:[...existingImages,...uploadedImageUrls],// Combine existing and new images\norigin:formElements.get('origin'),isActive:((_form$elements$namedI=form.elements.namedItem('isActive'))===null||_form$elements$namedI===void 0?void 0:_form$elements$namedI.checked)||false};// 3. Submit product data to the backend\nif(selectedProduct){updateProductMutation.mutate({id:selectedProduct._id,productData});}else{addProductMutation.mutate(productData);}};const handleDelete=id=>{if(window.confirm('Are you sure you want to delete this product?')){deleteProductMutation.mutate(id);}};const handleFileSelect=e=>{if(e.target.files){const files=Array.from(e.target.files);if(files.length+existingImages.length>5){toast.error('You can upload a maximum of 5 images in total.');return;}setSelectedFiles(prev=>[...prev,...files]);}};const removeSelectedFile=index=>{setSelectedFiles(prev=>prev.filter((_,i)=>i!==index));};const removeExistingImage=index=>{setExistingImages(prev=>prev.filter((_,i)=>i!==index));};if(isLoading)return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:\"Loading products...\"});if(error)return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[\"Error loading products: \",error.message]});const isSubmitting=addProductMutation.isPending||updateProductMutation.isPending||isUploading;return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-6\",children:\"Admin Product Management\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow-md rounded-lg p-6 mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold mb-4\",children:\"Existing Products\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full bg-white\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border-b\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border-b\",children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border-b\",children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border-b\",children:\"Stock\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border-b\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:productsData===null||productsData===void 0?void 0:productsData.products.map(product=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border-b\",children:product.name}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border-b\",children:product.category}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-2 px-4 border-b\",children:[\"\\u20A6\",product.price.toLocaleString()]}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border-b\",children:product.stock}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-2 px-4 border-b\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedProduct(product),className:\"bg-blue-500 text-white px-3 py-1 rounded mr-2 hover:bg-blue-600\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(product._id),className:\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\",children:\"Delete\"})]})]},product._id))})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow-md rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold mb-4\",children:selectedProduct?'Edit Product':'Add New Product'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"name\",children:\"Product Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"name\",defaultValue:(selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.name)||'',className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"category\",children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"category\",name:\"category\",defaultValue:(selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.category)||'',className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Category\"}),/*#__PURE__*/_jsx(\"option\",{value:\"fresh\",children:\"Fresh\"}),/*#__PURE__*/_jsx(\"option\",{value:\"processed\",children:\"Processed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"seeds\",children:\"Seeds\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",name:\"description\",defaultValue:(selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.description)||'',className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",rows:3,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"price\",children:\"Price (\\u20A6)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"price\",name:\"price\",defaultValue:(selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.price)||'',className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",step:\"0.01\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"stock\",children:\"Stock\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"stock\",name:\"stock\",defaultValue:(selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.stock)||0,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"weight\",children:\"Weight (e.g., 50kg)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"weight\",name:\"weight\",defaultValue:(selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.weight)||'',className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"origin\",children:\"Origin\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"origin\",name:\"origin\",defaultValue:(selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.origin)||'',className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",children:\"Product Images\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-center\",children:[/*#__PURE__*/_jsx(UploadCloud,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"file-upload\",className:\"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Upload files\"}),/*#__PURE__*/_jsx(\"input\",{id:\"file-upload\",name:\"images\",type:\"file\",className:\"sr-only\",multiple:true,accept:\"image/*\",onChange:handleFileSelect})]}),/*#__PURE__*/_jsx(\"p\",{className:\"pl-1\",children:\"or drag and drop\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"PNG, JPG, GIF up to 10MB\"})]})})]}),(existingImages.length>0||selectedFiles.length>0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"block text-gray-700 text-sm font-bold mb-2\",children:\"Image Previews\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-4\",children:[existingImages.map((url,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:url,alt:\"Existing product\",className:\"h-24 w-24 object-cover rounded-md\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeExistingImage(index),className:\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 leading-none\",children:/*#__PURE__*/_jsx(X,{className:\"w-3 h-3\"})})]},\"existing-\".concat(index))),selectedFiles.map((file,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(file),alt:\"New product\",className:\"h-24 w-24 object-cover rounded-md\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeSelectedFile(index),className:\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 leading-none\",children:/*#__PURE__*/_jsx(X,{className:\"w-3 h-3\"})})]},\"new-\".concat(index)))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2 flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"isActive\",name:\"isActive\",defaultChecked:selectedProduct?selectedProduct.isActive:true,className:\"mr-2 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"text-gray-700 text-sm font-bold\",htmlFor:\"isActive\",children:\"Product is Active\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2 flex justify-end gap-4\",children:[selectedProduct&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:resetForm,className:\"bg-gray-400 text-white px-4 py-2 rounded-md hover:bg-gray-500 focus:outline-none focus:shadow-outline\",children:\"Cancel Edit\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 focus:outline-none focus:shadow-outline flex items-center disabled:bg-gray-400\",disabled:isSubmitting,children:[isUploading&&/*#__PURE__*/_jsx(Loader2,{className:\"mr-2 h-4 w-4 animate-spin\"}),isUploading?'Uploading...':selectedProduct?'Update Product':'Add Product']})]})]},(selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct._id)||'new')]})]});};export default AdminProducts;","map":{"version":3,"names":["React","useState","useEffect","useQuery","useMutation","useQueryClient","productsAPI","uploadAPI","UploadCloud","X","Loader2","toast","jsx","_jsx","jsxs","_jsxs","AdminProducts","queryClient","selectedProduct","setSelectedProduct","selectedFiles","setSelectedFiles","existingImages","setExistingImages","isUploading","setIsUploading","images","data","productsData","isLoading","error","queryKey","queryFn","getProducts","addProductMutation","mutationFn","createProduct","onSuccess","invalidateQueries","success","resetForm","onError","err","_err$response","_err$response$data","console","response","message","updateProductMutation","_ref","id","productData","updateProduct","_err$response2","_err$response2$data","deleteProductMutation","deleteProduct","_err$response3","_err$response3$data","handleSubmit","e","_form$elements$namedI","preventDefault","uploadedImageUrls","length","formData","FormData","forEach","file","append","uploadProductImages","imageUrls","uploadError","_uploadError$response","_uploadError$response2","form","currentTarget","formElements","name","get","description","price","parseFloat","category","weight","stock","parseInt","origin","isActive","elements","namedItem","checked","mutate","_id","handleDelete","window","confirm","handleFileSelect","target","files","Array","from","prev","removeSelectedFile","index","filter","_","i","removeExistingImage","className","children","isSubmitting","isPending","products","map","product","toLocaleString","onClick","onSubmit","htmlFor","type","defaultValue","required","value","rows","step","multiple","accept","onChange","url","src","alt","concat","URL","createObjectURL","defaultChecked","disabled"],"sources":["/home/jaja/Desktop/irish-potatoes/frontend/src/pages/AdminProducts.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { productsAPI, uploadAPI } from '../services/api';\nimport { Product } from '../types';\nimport { UploadCloud, X, Loader2 } from 'lucide-react';\nimport toast from 'react-hot-toast';\n\nconst AdminProducts: React.FC = () => {\n  const queryClient = useQueryClient();\n  const [selectedProduct, setSelectedProduct] = useState<Product | null>(null);\n  const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\n  const [existingImages, setExistingImages] = useState<string[]>([]);\n  const [isUploading, setIsUploading] = useState(false);\n\n  // When a product is selected for editing, populate the form and existing images\n  useEffect(() => {\n    if (selectedProduct) {\n      setExistingImages(selectedProduct.images || []);\n      setSelectedFiles([]); // Clear any selected files from previous state\n    } else {\n      // Reset all form-related state when deselecting\n      setExistingImages([]);\n      setSelectedFiles([]);\n    }\n  }, [selectedProduct]);\n\n  // Fetch products\n  const { data: productsData, isLoading, error } = useQuery({\n    queryKey: ['adminProducts'],\n    queryFn: () => productsAPI.getProducts({}),\n  });\n\n  // Add Product Mutation\n  const addProductMutation = useMutation({\n    mutationFn: productsAPI.createProduct,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['adminProducts'] });\n      toast.success('Product added successfully!');\n      resetForm();\n    },\n    onError: (err: any) => {\n      console.error('Error adding product:', err);\n      toast.error(err.response?.data?.message || 'Failed to add product.');\n    },\n  });\n\n  // Update Product Mutation\n  const updateProductMutation = useMutation({\n    mutationFn: ({ id, productData }: { id: string; productData: Partial<Product> }) =>\n      productsAPI.updateProduct(id, productData),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['adminProducts'] });\n      toast.success('Product updated successfully!');\n      resetForm();\n    },\n    onError: (err: any) => {\n      console.error('Error updating product:', err);\n      toast.error(err.response?.data?.message || 'Failed to update product.');\n    },\n  });\n\n  // Delete Product Mutation\n  const deleteProductMutation = useMutation({\n    mutationFn: productsAPI.deleteProduct,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['adminProducts'] });\n      toast.success('Product deleted successfully!');\n    },\n    onError: (err: any) => {\n      console.error('Error deleting product:', err);\n      toast.error(err.response?.data?.message || 'Failed to delete product.');\n    },\n  });\n\n  const resetForm = () => {\n    setSelectedProduct(null);\n    setSelectedFiles([]);\n    setExistingImages([]);\n    // This will implicitly clear the form fields because of the `key` prop on the form\n  };\n  \n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    \n    let uploadedImageUrls: string[] = [];\n\n    // 1. Handle file uploads first\n    if (selectedFiles.length > 0) {\n      setIsUploading(true);\n      const formData = new FormData();\n      selectedFiles.forEach(file => {\n        formData.append('images', file);\n      });\n\n      try {\n        const response = await uploadAPI.uploadProductImages(formData);\n        uploadedImageUrls = response.data.imageUrls;\n        toast.success('Images uploaded successfully!');\n      } catch (uploadError: any) {\n        console.error('Image upload failed:', uploadError);\n        toast.error(uploadError.response?.data?.message || 'Image upload failed.');\n        setIsUploading(false);\n        return; // Stop form submission if upload fails\n      } finally {\n        setIsUploading(false);\n      }\n    }\n\n    const form = e.currentTarget;\n    const formElements = new FormData(form);\n\n    // 2. Construct product data with uploaded image URLs\n    const productData: Partial<Product> = {\n      name: formElements.get('name') as string,\n      description: formElements.get('description') as string,\n      price: parseFloat(formElements.get('price') as string),\n      category: formElements.get('category') as 'fresh' | 'processed' | 'seeds',\n      weight: formElements.get('weight') as string,\n      stock: parseInt(formElements.get('stock') as string) || 0,\n      images: [...existingImages, ...uploadedImageUrls], // Combine existing and new images\n      origin: formElements.get('origin') as string,\n      isActive: (form.elements.namedItem('isActive') as HTMLInputElement)?.checked || false,\n    };\n\n    // 3. Submit product data to the backend\n    if (selectedProduct) {\n      updateProductMutation.mutate({ id: selectedProduct._id, productData });\n    } else {\n      addProductMutation.mutate(productData as Product);\n    }\n  };\n\n  const handleDelete = (id: string) => {\n    if (window.confirm('Are you sure you want to delete this product?')) {\n      deleteProductMutation.mutate(id);\n    }\n  };\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files) {\n      const files = Array.from(e.target.files);\n      if (files.length + existingImages.length > 5) {\n        toast.error('You can upload a maximum of 5 images in total.');\n        return;\n      }\n      setSelectedFiles(prev => [...prev, ...files]);\n    }\n  };\n\n  const removeSelectedFile = (index: number) => {\n    setSelectedFiles(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const removeExistingImage = (index: number) => {\n    setExistingImages(prev => prev.filter((_, i) => i !== index));\n  };\n  \n  if (isLoading) return <div className=\"text-center py-8\">Loading products...</div>;\n  if (error) return <div className=\"text-center py-8\">Error loading products: {(error as Error).message}</div>;\n\n  const isSubmitting = addProductMutation.isPending || updateProductMutation.isPending || isUploading;\n\n  return (\n    <div className=\"container mx-auto p-4\">\n      <h1 className=\"text-3xl font-bold mb-6\">Admin Product Management</h1>\n      \n      {/* Product List */}\n      <div className=\"bg-white shadow-md rounded-lg p-6 mb-8\">\n        <h2 className=\"text-2xl font-semibold mb-4\">Existing Products</h2>\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full bg-white\">\n            <thead>\n              <tr>\n                <th className=\"py-2 px-4 border-b\">Name</th>\n                <th className=\"py-2 px-4 border-b\">Category</th>\n                <th className=\"py-2 px-4 border-b\">Price</th>\n                <th className=\"py-2 px-4 border-b\">Stock</th>\n                <th className=\"py-2 px-4 border-b\">Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {productsData?.products.map((product: Product) => (\n                <tr key={product._id}>\n                  <td className=\"py-2 px-4 border-b\">{product.name}</td>\n                  <td className=\"py-2 px-4 border-b\">{product.category}</td>\n                  <td className=\"py-2 px-4 border-b\">₦{product.price.toLocaleString()}</td>\n                  <td className=\"py-2 px-4 border-b\">{product.stock}</td>\n                  <td className=\"py-2 px-4 border-b\">\n                    <button\n                      onClick={() => setSelectedProduct(product)}\n                      className=\"bg-blue-500 text-white px-3 py-1 rounded mr-2 hover:bg-blue-600\"\n                    >\n                      Edit\n                    </button>\n                    <button\n                      onClick={() => handleDelete(product._id)}\n                      className=\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\"\n                    >\n                      Delete\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Add/Edit Product Form */}\n      <div className=\"bg-white shadow-md rounded-lg p-6\">\n        <h2 className=\"text-2xl font-semibold mb-4\">\n          {selectedProduct ? 'Edit Product' : 'Add New Product'}\n        </h2>\n        <form key={selectedProduct?._id || 'new'} onSubmit={handleSubmit} className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          \n          {/* Product Name */}\n          <div>\n            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"name\">\n              Product Name\n            </label>\n            <input\n              type=\"text\"\n              id=\"name\"\n              name=\"name\"\n              defaultValue={selectedProduct?.name || ''}\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n              required\n            />\n          </div>\n\n          {/* Category */}\n          <div>\n            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"category\">\n              Category\n            </label>\n            <select\n              id=\"category\"\n              name=\"category\"\n              defaultValue={selectedProduct?.category || ''}\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n              required\n            >\n              <option value=\"\">Select Category</option>\n              <option value=\"fresh\">Fresh</option>\n              <option value=\"processed\">Processed</option>\n              <option value=\"seeds\">Seeds</option>\n            </select>\n          </div>\n\n          {/* Description */}\n          <div className=\"md:col-span-2\">\n            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"description\">\n              Description\n            </label>\n            <textarea\n              id=\"description\"\n              name=\"description\"\n              defaultValue={selectedProduct?.description || ''}\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n              rows={3}\n              required\n            ></textarea>\n          </div>\n\n          {/* Price */}\n          <div>\n            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"price\">\n              Price (₦)\n            </label>\n            <input\n              type=\"number\"\n              id=\"price\"\n              name=\"price\"\n              defaultValue={selectedProduct?.price || ''}\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n              step=\"0.01\"\n              required\n            />\n          </div>\n          \n          {/* Stock */}\n          <div>\n            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"stock\">\n              Stock\n            </label>\n            <input\n              type=\"number\"\n              id=\"stock\"\n              name=\"stock\"\n              defaultValue={selectedProduct?.stock || 0}\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n              required\n            />\n          </div>\n\n          {/* Weight */}\n          <div>\n            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"weight\">\n              Weight (e.g., 50kg)\n            </label>\n            <input\n              type=\"text\"\n              id=\"weight\"\n              name=\"weight\"\n              defaultValue={selectedProduct?.weight || ''}\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n              required\n            />\n          </div>\n\n          {/* Origin */}\n          <div>\n            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"origin\">\n              Origin\n            </label>\n            <input\n              type=\"text\"\n              id=\"origin\"\n              name=\"origin\"\n              defaultValue={selectedProduct?.origin || ''}\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n            />\n          </div>\n\n          {/* Image Upload */}\n          <div className=\"md:col-span-2\">\n            <label className=\"block text-gray-700 text-sm font-bold mb-2\">Product Images</label>\n            <div className=\"mt-2 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md\">\n              <div className=\"space-y-1 text-center\">\n                <UploadCloud className=\"mx-auto h-12 w-12 text-gray-400\" />\n                <div className=\"flex text-sm text-gray-600\">\n                  <label htmlFor=\"file-upload\" className=\"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500\">\n                    <span>Upload files</span>\n                    <input id=\"file-upload\" name=\"images\" type=\"file\" className=\"sr-only\" multiple accept=\"image/*\" onChange={handleFileSelect} />\n                  </label>\n                  <p className=\"pl-1\">or drag and drop</p>\n                </div>\n                <p className=\"text-xs text-gray-500\">PNG, JPG, GIF up to 10MB</p>\n              </div>\n            </div>\n          </div>\n          \n          {/* Image Previews */}\n          {(existingImages.length > 0 || selectedFiles.length > 0) && (\n            <div className=\"md:col-span-2\">\n              <p className=\"block text-gray-700 text-sm font-bold mb-2\">Image Previews</p>\n              <div className=\"flex flex-wrap gap-4\">\n                {/* Existing Images */}\n                {existingImages.map((url, index) => (\n                  <div key={`existing-${index}`} className=\"relative\">\n                    <img src={url} alt=\"Existing product\" className=\"h-24 w-24 object-cover rounded-md\" />\n                    <button type=\"button\" onClick={() => removeExistingImage(index)} className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 leading-none\">\n                      <X className=\"w-3 h-3\" />\n                    </button>\n                  </div>\n                ))}\n                {/* New Selected Files */}\n                {selectedFiles.map((file, index) => (\n                  <div key={`new-${index}`} className=\"relative\">\n                    <img src={URL.createObjectURL(file)} alt=\"New product\" className=\"h-24 w-24 object-cover rounded-md\" />\n                    <button type=\"button\" onClick={() => removeSelectedFile(index)} className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 leading-none\">\n                      <X className=\"w-3 h-3\" />\n                    </button>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n\n          {/* Is Active */}\n          <div className=\"md:col-span-2 flex items-center\">\n            <input\n              type=\"checkbox\"\n              id=\"isActive\"\n              name=\"isActive\"\n              defaultChecked={selectedProduct ? selectedProduct.isActive : true}\n              className=\"mr-2 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n            />\n            <label className=\"text-gray-700 text-sm font-bold\" htmlFor=\"isActive\">\n              Product is Active\n            </label>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"md:col-span-2 flex justify-end gap-4\">\n            {selectedProduct && (\n              <button\n                type=\"button\"\n                onClick={resetForm}\n                className=\"bg-gray-400 text-white px-4 py-2 rounded-md hover:bg-gray-500 focus:outline-none focus:shadow-outline\"\n              >\n                Cancel Edit\n              </button>\n            )}\n            <button\n              type=\"submit\"\n              className=\"bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 focus:outline-none focus:shadow-outline flex items-center disabled:bg-gray-400\"\n              disabled={isSubmitting}\n            >\n              {isUploading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n              {isUploading ? 'Uploading...' : (selectedProduct ? 'Update Product' : 'Add Product')}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminProducts;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}